<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Feierabend-Countdown - Countdown bis zum Feierabend mit motivierenden Meilensteinen">
    <meta name="keywords" content="Feierabend, Countdown, Motivation, Arbeitsende, Timer">
    <meta name="author" content="Marco Fenner">
    <title>Feierabend-Countdown</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #2c3e50;
            color: #ecf0f1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        .container {
            background-color: #34495e;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 600px;
            width: 100%;
        }
        h1 {
            font-size: 2.5em;
            text-transform: uppercase;
            margin-bottom: 10px;
            color: #3498db;
        }
        .copyright {
            font-size: 12px;
            margin-bottom: 20px;
            color: #bdc3c7;
        }
        #countdownContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        .inputContainer {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        input, button {
            padding: 10px;
            font-size: 1em;
            border: none;
            border-radius: 5px;
        }
        input {
            background-color: #ecf0f1;
            color: #2c3e50;
        }
        button {
            background-color: #3498db;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2980b9;
        }
        button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        .timeDisplay {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
        }
        #seconds {
            font-size: 4em;
            font-weight: bold;
            margin: 20px 0;
            padding: 10px 20px;
            background-color: #000;
            color: #ffeb3b;
            border-radius: 10px;
        }
        #seconds.red {
            color: #ff0000;
        }
        #minutes, #hours {
            font-size: 1.5em;
            margin: 10px 0;
        }
        .progressContainer {
            width: 100%;
            height: 30px;
            background-color: #2c3e50;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 20px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        #progressBar {
            height: 100%;
            background-color: #00008B;
            transition: width 1s linear;
        }
        #progressText {
            position: absolute;
            width: 100%;
            text-align: center;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            font-size: 1em;
            color: white; /* Schriftfarbe der Prozentanzeige ist immer weiß */
        }
        #startTime {
            position: absolute;
            left: 10px;
            color: #ecf0f1;
            font-weight: bold;
            font-size: 1em;
        }
        #endTime {
            position: absolute;
            right: 10px;
            color: #ecf0f1;
            font-weight: bold;
            font-size: 1em;
        }
        #milestoneMessage {
            background-color: #000;
            color: #fff;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            text-align: center;
            width: 100%;
            opacity: 0;
            transition: opacity 1s;
        }
        #completionMessage {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #27ae60;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            display: none;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }
        #closeMessage {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-size: 1.5em;
        }
        #impressumButton {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #7f8c8d;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8em;
            cursor: pointer;
        }
        #impressumModal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            color: black;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }
        #closeImpressum {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-size: 1.5em;
            color: black;
        }
        #impressumContent {
            text-align: left;
        }
        #impressumContent h2 {
            color: #3498db;
        }
        #impressumContent a {
            color: #3498db;
            text-decoration: none;
        }
        #impressumContent a:hover {
            text-decoration: underline;
        }
        #impressumContent strong {
            color: #e74c3c;
        }
        #hintBox {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            color: black;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            text-align: center;
            z-index: 1000;
        }
        #closeHint {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-size: 1.5em;
        }
        #okHint {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #okHint:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Feierabend-Countdown</h1>
        <div class="copyright">© 2024 M. Fenner</div>
        <div id="countdownContainer">
            <div class="inputContainer">
                <input type="time" id="endTimeInput">
                <button id="saveButton">Speichern</button>
            </div>
            <div id="timeDisplay" class="timeDisplay"></div>
            <div id="seconds"></div>
            <div id="minutes"></div>
            <div id="hours"></div>
            <div class="progressContainer">
                <div id="startTime"></div>
                <div id="progressBar"></div>
                <div id="progressText"></div>
                <div id="endTime"></div>
            </div>
            <div id="milestoneMessage"></div>
        </div>
    </div>
    <div id="completionMessage">
        <span id="closeMessage">&times;</span>
        <p>Feierabend! Genießen Sie Ihren wohlverdienten Feierabend!</p>
    </div>
    <button id="impressumButton">Impressum</button>
    <div id="impressumModal">
        <span id="closeImpressum">&times;</span>
        <div id="impressumContent">
            <h2>IMPRESSUM</h2>
            <p>
                <strong>Betreiber der Website:</strong>
            </p>
            <p>
                Marco Fenner<br>
                Wiardastraße 19, 26603 Aurich<br>
                Telefon: 01573-0042105
            </p>
            <p>
                E-Mail: <a href="mailto:datenschrauber@posteo.de">datenschrauber@posteo.de</a>
            </p>
            <p>
                <strong>Wenn Ihnen dieser Countdown gefällt, würde ich mich über eine kleine Nachricht sehr freuen :-)</strong>
            </p>
            <p>
                Diese Seite ist ein privates Projekt und nicht-kommerziell.<br>
                Diese Seite enthält keine externen Links.<br>
                Diese Seite speichert keine Cookies.<br>
                Diese Seite speichert lediglich die eingegebene Uhrzeit lokal und ruft sie beim Laden / Aktualisieren der Seite wieder auf.<br>
                Der Quelltext ist für alle einsehbar.
            </p>
            <p>
                Viel Spaß und schönen Feierabend!  :-)
            </p>
        </div>
    </div>
    <div id="hintBox" style="display: none;">
        <span id="closeHint">&times;</span>
        <p>Bitte geben Sie zunächst Ihre Feierabend-Uhrzeit ein und klicken Sie auf 'Speichern'!</p>
        <button id="okHint">OK</button>
    </div>

    <script>
        const endTimeInput = document.getElementById('endTimeInput');
        const saveButton = document.getElementById('saveButton');
        const timeDisplay = document.getElementById('timeDisplay');
        const secondsElement = document.getElementById('seconds');
        const minutesElement = document.getElementById('minutes');
        const hoursElement = document.getElementById('hours');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const startTimeElement = document.getElementById('startTime');
        const endTimeElement = document.getElementById('endTime');
        const milestoneMessage = document.getElementById('milestoneMessage');
        const completionMessage = document.getElementById('completionMessage');
        const closeMessage = document.getElementById('closeMessage');
        const impressumButton = document.getElementById('impressumButton');
        const impressumModal = document.getElementById('impressumModal');
        const closeImpressum = document.getElementById('closeImpressum');
        const hintBox = document.getElementById('hintBox');
        const closeHint = document.getElementById('closeHint');
        const okHint = document.getElementById('okHint');

        let endTime;
        let countdownInterval;
        let startTime;

        const milestones = [
            "Halte durch, der Feierabend ist nah!",
            "Nur noch ein bisschen, du schaffst das!",
            "Gleich hast du es geschafft!",
            "Noch ein wenig Geduld, dann ist Feierabend!",
            "Fast geschafft, halte durch!",
            "Der Feierabend naht!",
            "Noch ein paar Minuten, dann ist es soweit!",
            "Endspurt, gleich ist Feierabend!",
            "Du bist fast am Ziel!",
            "Nur noch ein paar Sekunden!",
            "Gleich kannst du die Füße hochlegen!",
            "Noch ein bisschen Geduld!",
            "Der Feierabend ist zum Greifen nah!",
            "Du bist auf der Zielgeraden!",
            "Nur noch wenige Minuten bis zum Feierabend!",
            "Gleich hast du es geschafft, halt durch!",
            "Der Feierabend rückt näher!",
            "Noch ein kleiner Moment, dann ist es soweit!",
            "Nur noch ein bisschen durchhalten!",
            "Bald kannst du Feierabend machen!",
            "Halte durch, es ist gleich soweit!",
            "Nur noch ein wenig Geduld!",
            "Der Feierabend ist in Sichtweite!",
            "Noch ein kurzer Moment!",
            "Gleich ist es geschafft!",
            "Der Feierabend ist fast da!",
            "Nur noch wenige Augenblicke!",
            "Noch ein bisschen Geduld, dann hast du es geschafft!",
            "Bald ist es soweit!",
            "Der Feierabend ist nicht mehr weit!",
            "Nur noch wenige Minuten!",
            "Der Countdown läuft!",
            "Gleich hast du es geschafft!",
            "Noch ein kurzer Moment, dann ist Feierabend!",
            "Nur noch ein paar Minuten!",
            "Der Feierabend naht!",
            "Halte durch, gleich ist es soweit!",
            "Nur noch ein wenig, dann hast du es geschafft!",
            "Der Feierabend ist in greifbarer Nähe!",
            "Noch ein kurzer Augenblick!",
            "Bald ist Feierabend!",
            "Der Feierabend steht vor der Tür!",
            "Nur noch wenige Sekunden!",
            "Gleich kannst du entspannen!",
            "Noch ein bisschen durchhalten, dann ist es soweit!",
            "Der Feierabend ist zum Greifen nah!",
            "Nur noch ein kurzer Moment!",
            "Der Feierabend ist nicht mehr weit!",
            "Halte durch, du schaffst das!"
        ];

        function saveEndTime() {
            const inputTime = endTimeInput.value;
            if (!inputTime) return;

            const [hours, minutes] = inputTime.split(':');
            const now = new Date();
            endTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), hours, minutes, 0, 0);

            const fiveMinutesInMillis = 5 * 60 * 1000;
            if (endTime <= now || endTime - now < fiveMinutesInMillis) {
                endTime = new Date(now.getTime() + fiveMinutesInMillis);
                alert("Die Feierabend-Uhrzeit muss mindestens 5 Minuten in der Zukunft liegen. Die Zeit wurde automatisch angepasst.");
                const adjustedHours = endTime.getHours().toString().padStart(2, '0');
                const adjustedMinutes = endTime.getMinutes().toString().padStart(2, '0');
                endTimeInput.value = `${adjustedHours}:${adjustedMinutes}`;
            }

            startTime = now;
            localStorage.setItem('endTime', endTime.toISOString());
            localStorage.setItem('startTime', startTime.toISOString());
            localStorage.setItem('firstVisit', 'false');
            startCountdown();
            disableSaveButton();
        }

        function disableSaveButton() {
            saveButton.disabled = true;
            setTimeout(() => {
                saveButton.disabled = false;
            }, 2000);
        }

        function startCountdown() {
            clearInterval(countdownInterval);
            updateCountdown();
            countdownInterval = setInterval(updateCountdown, 1000);
            startMilestoneDisplay();
        }

        function updateCountdown() {
            const now = new Date();
            const timeDiff = endTime - now;
            const elapsedMillis = now - startTime;

            if (timeDiff <= 0) {
                clearInterval(countdownInterval);
                showCompletionMessage();
                return;
            }

            const totalSeconds = Math.floor(timeDiff / 1000);
            const totalMinutes = timeDiff / (1000 * 60);
            const totalHours = timeDiff / (1000 * 60 * 60);

            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;

            timeDisplay.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            secondsElement.textContent = totalSeconds.toLocaleString('de-DE');
            minutesElement.textContent = `... oder noch ${totalMinutes.toFixed(2).replace('.', ',')} Minuten`;
            hoursElement.textContent = `... oder noch ${totalHours.toFixed(2).replace('.', ',')} Stunden`;

            updateProgressBar(elapsedMillis, endTime - startTime);
            updateSecondsHighlight(totalSeconds);

            startTimeElement.textContent = startTime.toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' });
            endTimeElement.textContent = endTime.toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' });
        }

        function updateProgressBar(elapsedMillis, totalMillis) {
            const progress = (elapsedMillis / totalMillis) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `${progress.toFixed(2).replace('.', ',')}% geschafft`;
        }

        function updateSecondsHighlight(seconds) {
            if (seconds <= 10) {
                secondsElement.classList.add('red');
            } else {
                secondsElement.classList.remove('red');
            }
        }

        function startMilestoneDisplay() {
            const displayNextMilestone = () => {
                milestoneMessage.style.opacity = 0;
                setTimeout(() => {
                    const messageIndex = Math.floor(Math.random() * milestones.length);
                    milestoneMessage.textContent = milestones[messageIndex];
                    milestoneMessage.style.opacity = 1;
                }, 15000); // 15 Sekunden Pause
            };
            displayNextMilestone();
            setInterval(displayNextMilestone, Math.random() * (300000 - 60000) + 60000); // Zwischen 1 und 5 Minuten
        }

        function showCompletionMessage() {
            completionMessage.style.display = 'block';
        }

        function hideCompletionMessage() {
            completionMessage.style.display = 'none';
        }

        function showImpressum() {
            impressumModal.style.display = 'block';
        }

        function hideImpressum() {
            impressumModal.style.display = 'none';
        }

        function hideHintBox() {
            hintBox.style.display = 'none';
        }

        function setInitialEndTime() {
            const now = new Date();
            if (now.getHours() >= 16) {
                endTime = new Date(now.getTime() + 60 * 60 * 1000); // Systemzeit + 1 Stunde
            } else {
                endTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 16, 0, 0); // 16 Uhr
            }
            const hours = endTime.getHours().toString().padStart(2, '0');
            const minutes = endTime.getMinutes().toString().padStart(2, '0');
            endTimeInput.value = `${hours}:${minutes}`;
            startTime = now;
            localStorage.setItem('endTime', endTime.toISOString());
            localStorage.setItem('startTime', startTime.toISOString());
        }

        saveButton.addEventListener('click', saveEndTime);
        closeMessage.addEventListener('click', hideCompletionMessage);
        impressumButton.addEventListener('click', showImpressum);
        closeImpressum.addEventListener('click', hideImpressum);
        closeHint.addEventListener('click', hideHintBox);
        okHint.addEventListener('click', () => {
            hintBox.style.display = 'none';
        });

        const savedEndTime = localStorage.getItem('endTime');
        const savedStartTime = localStorage.getItem('startTime');
        if (savedEndTime && savedStartTime) {
            endTime = new Date(savedEndTime);
            startTime = new Date(savedStartTime);
            const now = new Date();

            const fiveMinutesInMillis = 5 * 60 * 1000;
            if (endTime <= now || endTime - now < fiveMinutesInMillis) {
                endTime = new Date(now.getTime() + 3600000); // Eine Stunde in die Zukunft
                alert("Die gespeicherte Feierabend-Uhrzeit liegt in der Vergangenheit und wurde auf eine Stunde in der Zukunft gesetzt.");
                localStorage.setItem('endTime', endTime.toISOString());
                const adjustedHours = endTime.getHours().toString().padStart(2, '0');
                const adjustedMinutes = endTime.getMinutes().toString().padStart(2, '0');
                endTimeInput.value = `${adjustedHours}:${adjustedMinutes}`;
            }

            const hours = endTime.getHours().toString().padStart(2, '0');
            const minutes = endTime.getMinutes().toString().padStart(2, '0');
            endTimeInput.value = `${hours}:${minutes}`;
            startCountdown();
        } else {
            setInitialEndTime();
            hintBox.style.display = 'block';
        }

        const firstVisit = localStorage.getItem('firstVisit');
        if (!firstVisit) {
            setInitialEndTime();
            hintBox.style.display = 'block';
            localStorage.setItem('firstVisit', 'false');
        }
    </script>
</body>
</html>

